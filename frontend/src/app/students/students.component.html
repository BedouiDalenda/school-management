<div style="padding: 20px; max-width: 1200px; margin: 0 auto;">
  <!-- Header -->
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #eee;">
    <h2 style="margin: 0; color: #333;">Students Management</h2>
    <button 
      (click)="logout()" 
      style="padding: 10px 20px; background: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500; transition: background 0.3s;"
      onmouseover="this.style.background='#c62828'" 
      onmouseout="this.style.background='#d32f2f'">
      Logout
    </button>
  </div>

  <!-- Message d'erreur global -->
  <div *ngIf="errorMessage" style="color: #d32f2f; margin-bottom: 20px; padding: 12px; background: #ffebee; border-radius: 4px; border-left: 4px solid #d32f2f;">
    {{ errorMessage }}
  </div>

  <!-- Search & Filter Bar -->
  <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 20px; flex-wrap: wrap;">
    <!-- Search -->
    <input 
      [(ngModel)]="searchQuery" 
      placeholder="Search by username..." 
      style="padding: 10px 15px; width: 250px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
    <button 
      (click)="search()" 
      [disabled]="loading" 
      style="padding: 10px 20px; background: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500; min-width: 90px;">
      Search
    </button>
    
    <!-- Filter -->
    <select 
      [(ngModel)]="selectedLevel" 
      style="padding: 10px 15px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; min-width: 150px;">
      <option value="">All Levels</option>
      <option *ngFor="let level of levels" [value]="level">{{ level }}</option>
    </select>
    <button 
      (click)="filter()" 
      [disabled]="loading" 
      style="padding: 10px 20px; background: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500; min-width: 90px;">
      Filter
    </button>
    
    <!-- Add Button -->
    <button 
      (click)="openForm()" 
      [disabled]="loading" 
      style="padding: 10px 20px; background: #388e3c; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500; margin-left: auto; min-width: 140px;"
      onmouseover="this.style.background='#2e7d32'" 
      onmouseout="this.style.background='#388e3c'">
      + Add Student
    </button>
  </div>

  <!-- Spinner -->
  <div *ngIf="loading" style="margin: 15px 0; color: #666; font-size: 14px;">Loading...</div>

  <!-- Table -->
  <table style="width: 100%; border-collapse: collapse; background: white; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-radius: 4px; overflow: hidden;">
    <thead>
      <tr style="background: #f5f5f5;">
        <th style="padding: 15px; text-align: left; font-weight: 600; color: #555; border-bottom: 2px solid #ddd;">ID</th>
        <th style="padding: 15px; text-align: left; font-weight: 600; color: #555; border-bottom: 2px solid #ddd;">Username</th>
        <th style="padding: 15px; text-align: left; font-weight: 600; color: #555; border-bottom: 2px solid #ddd;">Level</th>
        <th style="padding: 15px; text-align: center; font-weight: 600; color: #555; border-bottom: 2px solid #ddd; width: 200px;">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let student of students" style="border-bottom: 1px solid #eee;">
        <td style="padding: 15px;">{{ student.id }}</td>
        <td style="padding: 15px;">{{ student.username }}</td>
        <td style="padding: 15px;">{{ student.level }}</td>
        <td style="padding: 15px; text-align: center;">
          <button 
            (click)="openForm(student)" 
            [disabled]="loading" 
            style="padding: 8px 16px; background: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 8px; font-size: 13px; min-width: 70px;">
            Edit
          </button>
          <button 
            (click)="delete(student.id)" 
            [disabled]="loading || !student.id" 
            style="padding: 8px 16px; background: #d32f2f; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 13px; min-width: 70px;">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Message si aucun Ã©tudiant -->
  <div *ngIf="!loading && students.length === 0" style="text-align: center; padding: 40px; color: #999; background: #f9f9f9; margin-top: 20px; border-radius: 4px;">
    No students found.
  </div>

  <!-- Formulaire Modal -->
  <div *ngIf="showForm" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: flex; justify-content: center; align-items: center; z-index: 1000;">
    <div style="background: white; padding: 30px; border-radius: 8px; width: 450px; max-width: 90%; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
      <h3 style="margin-top: 0; margin-bottom: 25px; color: #333;">{{ editMode ? 'Edit Student' : 'Add Student' }}</h3>
      
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #555; font-size: 14px;">Username *</label>
        <input 
          [(ngModel)]="currentStudent.username" 
          placeholder="Enter username" 
          style="width: 100%; padding: 12px; box-sizing: border-box; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
      </div>
      
      <div style="margin-bottom: 25px;">
        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #555; font-size: 14px;">Level *</label>
        <select 
          [(ngModel)]="currentStudent.level" 
          style="width: 100%; padding: 12px; box-sizing: border-box; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
          <option value="">-- Select Level --</option>
          <option *ngFor="let level of levels" [value]="level">{{ level }}</option>
        </select>
      </div>
      
      <div style="display: flex; gap: 10px; margin-top: 30px;">
        <button 
          (click)="save()" 
          [disabled]="loading || !currentStudent.username || !currentStudent.level" 
          style="flex: 1; padding: 12px; background: #388e3c; color: white; border: none; cursor: pointer; border-radius: 4px; font-size: 14px; font-weight: 500;">
          {{ loading ? 'Saving...' : 'Save' }}
        </button>
        <button 
          (click)="closeForm()" 
          [disabled]="loading" 
          style="flex: 1; padding: 12px; background: #757575; color: white; border: none; cursor: pointer; border-radius: 4px; font-size: 14px; font-weight: 500;">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>